<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solana Account Explorer</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto Mono', monospace;
            margin: 0;
            background-color: #0a0f1a;
            color: #d0f2ff;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .container {
            background-color: #141e30;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.6);
            max-width: 1200px;
            margin: 20px auto;
            flex: 1;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #90caf9;
            text-shadow: 0 0 8px #375067;
            letter-spacing: 2px;
        }

        .search-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

         input[type="text"] {
             flex: 1;
            padding: 14px;
            border: 2px solid #375067;
            border-radius: 8px;
            background-color: #1e2a42;
            color: #a7e7ff;
            transition: border-color 0.3s;
             font-size: 16px;
            letter-spacing: 1px;
           box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
           outline: none;
        }


        input[type="text"]:focus {
            border-color: #a7e7ff;
           box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
        }


         button {
            padding: 14px 30px;
            background-color: #a7e7ff;
            color: #050a13;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.1s;
             font-size: 16px;
            letter-spacing: 1px;
           box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
        }


        button:hover {
            background-color: #7dd0ff;
           transform: scale(1.05);
        }
         #error-message {
            color: #ff7e7e;
            margin-top: 20px;
            padding: 15px;
            background-color: #102538;
            border: 1px solid #375067;
            border-radius: 8px;
             font-size: 16px;
             letter-spacing: 1px;
           box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
             text-align: center;
        }


        .wallet-info,
        .token-list,
        .transaction-list,
        .transaction-details {
            margin-top: 25px;
             background-color: #1e2a42;
            padding: 25px;
            border: 1px solid #375067;
            border-radius: 10px;
            overflow-x: auto;
            margin-bottom: 25px;
             box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
        }

        .wallet-info h2,
        .token-list h2,
        .transaction-list h2,
        .transaction-details h2 {
            color: #90caf9;
            border-bottom: 1px solid #375067;
            padding-bottom: 10px;
            margin-bottom: 20px;
             text-shadow: 0 0 4px #375067;
            letter-spacing: 1px;
        }


         .wallet-info .info-item,
        .transaction-details .info-item {
            margin-bottom: 15px;
            display: flex;
             align-items: center;
             font-size: 16px;
            letter-spacing: 1px;
        }

        .wallet-info .info-item .label,
        .transaction-details .info-item .label {
            font-weight: bold;
            margin-right: 12px;
            color: #81d4fa;
            text-shadow: 0 0 2px #375067;
        }

        .token-item {
            background-color: #2a3e57;
            padding: 20px;
            margin-bottom: 15px;
           border-radius: 10px;
            border: 1px solid #375067;
            transition: transform 0.1s;
        }


        .token-item:hover {
           transform: scale(1.02);
        }


       .token-item .label {
             font-weight: bold;
            margin-right: 12px;
             color: #81d4fa;
             text-shadow: 0 0 2px #375067;
             letter-spacing: 1px;
        }


       .transaction-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
             background-color: #2a3e57;
            border: 1px solid #375067;
           border-radius: 10px;
            overflow-x: auto;
       }
       .transaction-table th,
       .transaction-table td {
            padding: 12px;
            border: 1px solid #375067;
            text-align: left;
            font-size: 14px;
             letter-spacing: 0.5px;
        }

        .transaction-table th {
             background-color: #1e2a42;
             color: #90caf9;
            text-shadow: 0 0 2px #375067;
        }

        .pagination {
           margin-top: 25px;
            text-align: center;
        }

        .pagination button {
            margin: 0 5px;
           background-color: #375067;
           color: #a7e7ff;
            border: none;
             padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.1s;
            letter-spacing: 1px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
        }

        .pagination button:hover {
            background-color: #4a6985;
             transform: scale(1.05);
        }

        .pagination .active {
             background-color: #a7e7ff;
             color: #050a13;
        }

         a {
            color: #a7e7ff;
            text-decoration: none;
            transition: color 0.3s;
        }

        a:hover {
           color: #7dd0ff;
        }

        .sliced {
            display: inline-block;
            max-width: 150px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .sliced:hover {
           overflow: visible;
           white-space: normal;
           word-break: break-all;
        }

        .no-data {
           text-align: center;
            padding: 20px;
           background-color: #2a3e57;
           border-radius: 8px;
            margin-top: 20px;
           box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Solana Account Explorer</h1>
        <div class="search-container">
            <input type="text" id="walletAddress" placeholder="Enter Solana Wallet/Transaction Address (Devnet)">
            <button onclick="fetchAccountDetails()">Get Details</button>
        </div>
        <div id="error-message"></div>
        <div id="wallet-info" class="wallet-info"></div>
        <div id="token-balances" class="token-list"></div>
        <div id="transaction-history" class="transaction-list"></div>
        <div id="pagination" class="pagination"></div>
        <div id="transaction-details" class="transaction-details"></div>
    </div>
    <script>
        const apiUrl = "https://api.devnet.solana.com";
        const LAMPORTS_PER_SOL = 1000000000;
        let allTransactions = [];
        let currentPage = 1;
        const transactionsPerPage = 10;


       async function fetchAccountDetails(walletAddressFromUrl = null) {
            const walletAddress = walletAddressFromUrl || document.getElementById('walletAddress').value;
            const walletInfoDiv = document.getElementById('wallet-info');
            const errorMessageDiv = document.getElementById('error-message');
            const tokenBalancesDiv = document.getElementById('token-balances');
            const transactionHistoryDiv = document.getElementById('transaction-history');
            const paginationDiv = document.getElementById('pagination');
            const transactionDetailsDiv = document.getElementById('transaction-details');

            walletInfoDiv.innerHTML = '';
            errorMessageDiv.textContent = '';
            tokenBalancesDiv.innerHTML = '';
            transactionHistoryDiv.innerHTML = '';
            paginationDiv.innerHTML = '';
            transactionDetailsDiv.innerHTML = "";
           allTransactions = [];

            if (!walletAddress) {
                errorMessageDiv.textContent = "Please enter a wallet or transaction address.";
                updateUrl('');
                return;
            }

            const isWalletAddress = /^[1-9A-HJ-NP-Za-km-z]{32,44}$/.test(walletAddress);
            if (isWalletAddress) {
                try {
                     // Fetch SOL balance and general account info
                    const accountInfo = await fetchAccountInfo(walletAddress);
                     if (accountInfo) {
                        displayWalletInfo(accountInfo, walletAddress);
                    }

                    // Fetch token balances
                     const tokenBalances = await fetchTokenBalances(walletAddress);
                   if (tokenBalances) {
                         displayTokenBalances(tokenBalances);
                    }

                    // Fetch all transactions
                    allTransactions = await fetchAllTransactions(walletAddress);
                     renderTransactions(walletAddress);
                    updateUrl(walletAddress);

                } catch (error) {
                    errorMessageDiv.textContent = `Error: ${error.message}`;
                }
            } else {
                try {
                    // Handle transaction hash
                    const transactionDetails = await fetchTransactionDetails(walletAddress);
                    if (transactionDetails) {
                         displayTransactionDetails(transactionDetails);
                       allTransactions = [transactionDetails]; // set all transactions to that only
                        renderTransactions();
                         updateUrl(walletAddress);
                    } else {
                         errorMessageDiv.textContent = `No transaction found for address: ${walletAddress}`;
                         updateUrl('');
                    }
                } catch (error) {
                      errorMessageDiv.textContent = `Error: ${error.message}`;
                    updateUrl('');
                }
            }
        }
        async function fetchAccountInfo(walletAddress) {
           const requestBody = {
                jsonrpc: "2.0",
                id: 1,
                method: "getAccountInfo",
                params: [
                    walletAddress,
                    {
                        encoding: "jsonParsed"
                    }
                ]
            };
            try {
                const response = await fetch(apiUrl, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(requestBody)
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                const data = await response.json();
                if (data.error) {
                     throw new Error(`RPC Error: ${data.error.message}`);
                }
                return data.result.value;
            } catch (error) {
                console.error("Failed to fetch account info:", error);
                return null;
            }
        }

        function displayWalletInfo(accountInfo, walletAddress) {
              const walletInfoDiv = document.getElementById('wallet-info');
              let solBalance = 0;
              let isNative = false;
              if (accountInfo && accountInfo.lamports) {
                    solBalance = accountInfo.lamports / 1000000000;
                    isNative = accountInfo && accountInfo.data && accountInfo.data.parsed && accountInfo.data.parsed.info && accountInfo.data.parsed.info.isNative;
              }
               let lastTransactionTime = "N/A";

                fetchTransactionHistory(walletAddress).then(transactions => {
                   if (transactions && transactions.length > 0) {
                         const lastTransaction = transactions[0];
                        lastTransactionTime = lastTransaction && lastTransaction.blockTime ? new Date(lastTransaction.blockTime * 1000).toLocaleString() : "N/A";
                         walletInfoDiv.innerHTML = `
                                 <h2>Wallet Information</h2>
                                     <div class="info-item">
                                       <span class="label">SOL Balance:</span> ${isNative ? solBalance.toFixed(4) + ' SOL' : "N/A"}
                                   </div>
                                    <div class="info-item">
                                         <span class="label">Last Transaction Time:</span> ${lastTransactionTime}
                                   </div>`;
                    } else {
                          walletInfoDiv.innerHTML = `
                                 <h2>Wallet Information</h2>
                                     <div class="info-item">
                                        <span class="label">SOL Balance:</span> ${isNative ? solBalance.toFixed(4) + ' SOL' : "N/A"}
                                     </div>
                                     <div class="info-item">
                                         <span class="label">Last Transaction Time:</span> ${lastTransactionTime}
                                   </div>`;
                    }
                  }).catch(error => {
                         walletInfoDiv.innerHTML = `
                        <h2>Wallet Information</h2>
                            <div class="info-item">
                                    <span class="label">SOL Balance:</span> ${isNative ? solBalance.toFixed(4) + ' SOL' : "N/A"}
                           </div>
                             <div class="info-item">
                                <span class="label">Last Transaction Time:</span>  Error getting last transaction
                           </div>`;
                })
        }


        async function fetchTokenBalances(walletAddress) {
            const requestBody = {
                jsonrpc: "2.0",
                id: 1,
                method: "getTokenAccountsByOwner",
                params: [
                    walletAddress,
                    {
                        programId: "TokenkegQfeZyiNwAJj5jTNvWjehgPir2pz7uRTpskE" // SPL Token Program ID
                    },
                    {
                        encoding: "jsonParsed"
                    }
                ]
            };
            try {
                const response = await fetch(apiUrl, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(requestBody)
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }

                const data = await response.json();
                if (data.error) {
                       throw new Error(`RPC Error: ${data.error.message}`);
                }
                return data.result.value;
            } catch (error) {
                console.error("Failed to fetch token balances:", error);
                 return null;
            }
        }
         function displayTokenBalances(tokenAccounts) {
                const tokenBalancesDiv = document.getElementById('token-balances');
             if (!tokenAccounts || tokenAccounts.length === 0) {
                tokenBalancesDiv.innerHTML = `<div class="no-data"><p>No Tokens held</p></div>`;
                    return;
             }
                let tokensHTML = `<h2>Token Balances</h2>`;
                for (const account of tokenAccounts) {
                    const tokenInfo = account.account.data.parsed.info;
                    const amount = tokenInfo.tokenAmount.uiAmountString;
                     const mint = tokenInfo.mint;
                    tokensHTML += `<div class="token-item">
                                     <span class="label">Mint:</span> ${mint} <br>
                                       <span class="label">Balance:</span> ${amount}
                                 </div>`;
                }
                tokenBalancesDiv.innerHTML = tokensHTML;
        }
        async function fetchTransactionHistory(walletAddress) {
           const requestBody = {
                jsonrpc: "2.0",
                id: 1,
                method: "getSignaturesForAddress",
                params: [
                    walletAddress,
                    {
                        limit: 5
                    }
                ]
            };

            try {
                const response = await fetch(apiUrl, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(requestBody)
                });

                if (!response.ok) {
                      throw new Error(`HTTP error! Status: ${response.status}`);
                }
                const data = await response.json();
                   if (data.error) {
                     throw new Error(`RPC Error: ${data.error.message}`);
                }
                const transactionSignatures = data.result;

               if (!transactionSignatures || transactionSignatures.length === 0) {
                    return [];
                }
                // Fetch transaction details for each signature
                const transactions = await Promise.all(transactionSignatures.map(async (sig) => {
                     return await fetchTransactionDetails(sig.signature);
                 }));
                 return transactions;
             } catch (error) {
                 console.error("Failed to fetch transaction history:", error);
                 return null;
             }
        }

        async function fetchAllTransactions(walletAddress, before = null) {
             let allTransactions = [];
              let hasMore = true;
              let beforeSignature = before;
            while (hasMore) {
                const requestBody = {
                    jsonrpc: "2.0",
                    id: 1,
                    method: "getSignaturesForAddress",
                    params: [
                        walletAddress,
                        {
                            limit: 100,
                            before: beforeSignature
                        }
                    ]
                };
                try {
                   const response = await fetch(apiUrl, {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify(requestBody)
                    });

                    if (!response.ok) {
                          throw new Error(`HTTP error! Status: ${response.status}`);
                    }
                    const data = await response.json();
                     if (data.error) {
                            throw new Error(`RPC Error: ${data.error.message}`);
                    }
                    const transactionSignatures = data.result;


                    if (!transactionSignatures || transactionSignatures.length === 0) {
                        hasMore = false;
                        continue;
                    }
                    const transactionDetailsPromises = transactionSignatures.map(sig => fetchTransactionDetails(sig.signature));
                     const transactionDetails = await Promise.all(transactionDetailsPromises);
                      allTransactions = allTransactions.concat(transactionDetails);
                    beforeSignature = transactionSignatures[transactionSignatures.length - 1].signature;
                } catch (error) {
                    console.error("Failed to fetch all transactions:", error);
                    hasMore = false;
                }
            }
            return allTransactions;
        }



        async function fetchTransactionDetails(signature) {
             const requestBody = {
                jsonrpc: "2.0",
                id: 1,
                method: "getTransaction",
                params: [
                    signature,
                    {
                        encoding: "jsonParsed"
                    }
                ]
            };

            try {
                  const response = await fetch(apiUrl, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(requestBody)
                });
                 if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                const data = await response.json();
                if (data.error) {
                    throw new Error(`RPC Error: ${data.error.message}`);
                }
                return data.result;
            } catch (error) {
                console.error("Failed to fetch transaction details:", error);
                return null;
            }
        }

        function displayTransactionDetails(results) {
                const transactionDetailsDiv = document.getElementById('transaction-details');
               transactionDetailsDiv.innerHTML = "";
              if (!results || !results.transaction || !results.meta) {
                     transactionDetailsDiv.innerHTML = `<div class="no-data"><p>Invalid transaction data</p></div>`;
                  return;
              }
             const blockTime = new Date(results.blockTime * 1000).toUTCString();
            let sender = 'N/A';
             let receiver = 'N/A';
            let amount = 'N/A';

                if (results.transaction && results.transaction.message && results.transaction.message.instructions) {
                 for (const instruction of results.transaction.message.instructions) {
                      if (instruction.parsed && instruction.parsed.type === "transfer") {
                          if (instruction.parsed.info && instruction.parsed.info.source) {
                              sender = instruction.parsed.info.source;
                         }
                         if (instruction.parsed.info && instruction.parsed.info.destination) {
                              receiver = instruction.parsed.info.destination
                         }
                         if (results.meta.preBalances && results.meta.postBalances && results.meta.preBalances.length > 0 && results.meta.postBalances.length > 0) {
                               amount = (results.meta.preBalances[0] - results.meta.postBalances[0]) / LAMPORTS_PER_SOL;
                         }
                        break;
                      }
                  }
            }
             const gasSpent = results.meta.computeUnitsConsumed;
             const fee = results.meta.fee / LAMPORTS_PER_SOL;
             const blockNumber = results.slot;
            const confirmationTime = Math.floor((Date.now() / 1000) - results.blockTime);
              const transactionHTML = `
                  <h2>Transaction Details</h2>
                     <div class="info-item">
                        <span class="label">Sender Address:</span><a href="/${sender}" onclick="navigateTo(event, '${sender}')" class="sliced" title="${sender}">${sender}</a>
                   </div>
                    <div class="info-item">
                       <span class="label">Receiver Address:</span> <a href="/${receiver}" onclick="navigateTo(event, '${receiver}')" class="sliced" title="${receiver}">${receiver}</a>
                   </div>
                      <div class="info-item">
                       <span class="label">Amount (SOL):</span> ${amount} SOL
                   </div>
                     <div class="info-item">
                         <span class="label">Block Time (UTC):</span> ${blockTime}
                    </div>
                     <div class="info-item">
                       <span class="label">Block Number:</span> ${blockNumber}
                    </div>
                       <div class="info-item">
                       <span class="label">Time Since Confirmation (seconds):</span> ${confirmationTime} seconds
                   </div>
                  <div class="info-item">
                        <span class="label">Gas Spent:</span> ${gasSpent}
                   </div>
                   <div class="info-item">
                       <span class="label">Fee (SOL):</span> ${fee} SOL
                   </div>
              `;
             transactionDetailsDiv.innerHTML = transactionHTML;
        }


          function renderTransactions(walletAddress) {
            const transactionHistoryDiv = document.getElementById('transaction-history');
            const paginationDiv = document.getElementById('pagination');
            const transactionDetailsDiv = document.getElementById('transaction-details');

            transactionHistoryDiv.innerHTML = '';
            paginationDiv.innerHTML = '';
            transactionDetailsDiv.innerHTML = "";


             if (!allTransactions || allTransactions.length === 0) {
                 transactionHistoryDiv.innerHTML = `<div class="no-data"><p>No Transactions found</p></div>`;
                return;
            }

            const totalPages = Math.ceil(allTransactions.length / transactionsPerPage);
            const startIndex = (currentPage - 1) * transactionsPerPage;
            const endIndex = startIndex + transactionsPerPage;
            const transactionsToDisplay = allTransactions.slice(startIndex, endIndex);

            let transactionsHTML = `<h2>Transaction History</h2>
                                     <table class="transaction-table">
                                          <thead>
                                              <tr>
                                                  <th>Signature</th>
                                                  <th>Block Time</th>
                                                  <th>From</th>
                                                  <th>To</th>
                                                  <th>Amount</th>
                                             </tr>
                                        </thead>
                                         <tbody>
                                     `;
            for (const transaction of transactionsToDisplay) {
                if (!transaction || !transaction.transaction || !transaction.meta || !transaction.meta.innerInstructions) continue;
                const signature = transaction.transaction.signatures[0];
                const blockTime = transaction.blockTime ? new Date(transaction.blockTime * 1000).toLocaleString() : "Pending";
                let fromAddress = "Unknown";
                let toAddress = "Unknown";
                let amount = "0";
                const transferDetails = extractTransferDetails(transaction, walletAddress);
                 if (transferDetails) {
                        fromAddress = transferDetails.fromAddress;
                        toAddress = transferDetails.toAddress;
                        amount = transferDetails.amount;
                 }

                transactionsHTML += `<tr>
                                        <td><a href="/${signature}" onclick="navigateTo(event, '${signature}')" class="sliced" title="${signature}">${signature}</a></td>
                                        <td>${blockTime}</td>
                                        <td><a href="/${fromAddress}" onclick="navigateTo(event, '${fromAddress}')" class="sliced" title="${fromAddress}">${fromAddress}</a></td>
                                       <td><a href="/${toAddress}" onclick="navigateTo(event, '${toAddress}')" class="sliced" title="${toAddress}">${toAddress}</a></td>
                                       <td>${amount}</td>
                                   </tr>`;
             }
            transactionsHTML += `</tbody></table>`;
            transactionHistoryDiv.innerHTML = transactionsHTML;

             if (totalPages > 1) {
                let paginationHTML = "";
                 for (let i = 1; i <= totalPages; i++) {
                    paginationHTML += `<button onclick="goToPage(${i})" class="${i === currentPage ? 'active' : ''}">${i}</button>`;
                 }
                 paginationDiv.innerHTML = paginationHTML;
            }
        }


        function goToPage(pageNumber) {
              currentPage = pageNumber;
               renderTransactions(document.getElementById('walletAddress').value);
        }

         function extractTransferDetails(transaction, walletAddress) {
             if (!transaction || !transaction.meta || !transaction.meta.innerInstructions) {
                    return null;
            }

             for (const instructionSet of transaction.meta.innerInstructions) {
                  for (const instruction of instructionSet.instructions) {
                    if (instruction.parsed && instruction.parsed.type === "transfer") {
                         const info = instruction.parsed.info;
                        let fromAddress = info.source;
                        let toAddress = info.destination;
                         let amount = 0;

                         if (info.lamports) { // For SOL transfers
                             amount = info.lamports / 1000000000;
                                if (fromAddress === walletAddress) {
                                    fromAddress = walletAddress;
                                   toAddress = info.destination;
                            }  else {
                                  fromAddress = info.source;
                                    toAddress = walletAddress;
                            }

                      } else if (info.amount) { // For Token Transfers
                             amount = info.amount / Math.pow(10, info.decimals);

                           if (fromAddress === walletAddress) {
                                 fromAddress = walletAddress;
                                toAddress = info.destination;
                             } else {
                                   fromAddress = info.source;
                                    toAddress = walletAddress;
                            }
                         }
                       return { fromAddress, toAddress, amount: amount.toFixed(4) };
                    }
               }
            }

             if (transaction.transaction.message.instructions) {
                 for (const instruction of transaction.transaction.message.instructions) {
                      if (instruction.parsed && instruction.parsed.type === "transfer") {
                         const info = instruction.parsed.info;
                          let fromAddress = info.source;
                        let toAddress = info.destination;
                         let amount = 0;

                         if (info.lamports) { // For SOL transfers
                             amount = info.lamports / 1000000000;
                            if (fromAddress === walletAddress) {
                                 fromAddress = walletAddress;
                                  toAddress = info.destination;
                             } else {
                                 fromAddress = info.source;
                                toAddress = walletAddress;
                            }
                        } else if (info.amount) { // For Token Transfers
                              amount = info.amount / Math.pow(10, info.decimals);
                              if (fromAddress === walletAddress) {
                                   fromAddress = walletAddress;
                                   toAddress = info.destination;
                             } else {
                                 fromAddress = info.source;
                                toAddress = walletAddress;
                             }
                        }
                         return { fromAddress, toAddress, amount: amount.toFixed(4) };
                     }
                }
             }
             return null;
       }


        function updateUrl(walletAddress) {
            if (walletAddress) {
                history.pushState(null, null, `/${walletAddress}`);
            } else {
                history.pushState(null, null, '/');
            }
        }


         function navigateTo(event, address) {
            event.preventDefault();
            window.location.href = `/${address}`; // Navigate to new URL
        }


        // On page load, parse wallet address from URL
        window.onload = function () {
            const path = window.location.pathname;
             if (path && path.length > 1) {
                 const walletAddressFromUrl = path.substring(1);
                 document.getElementById('walletAddress').value = walletAddressFromUrl;
                 fetchAccountDetails(walletAddressFromUrl);
             }
        }
    </script>
</body>

</html>
